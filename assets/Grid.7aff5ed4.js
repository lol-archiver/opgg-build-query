import{_ as M,c as r,j as p,q as u,r as w,k as T,b as a,d,u as s,f as E,F as y,g as b,n as S,t as F,h as G}from"./index.2e94a5dd.js";const K=["no-border"],Q={key:0},U={row:""},X=["_lastInRow","rowspan","colspan","title","no-padding","no-border"],Y={body:""},Z=["selected","hover","onDblclick"],ee=["_lastInRow","title","no-padding","no-border","even","odd","onClick"],te={__name:"Grid",props:{modelValue:{type:[Object],default:()=>({})},heads:{type:Array,default:()=>[]},datas:{type:Array,default:()=>[]},showHead:{type:[Boolean,String],default:!0},showBody:{type:[Boolean,String],default:!0},showPadding:{type:[Boolean,String],default:!0},showBorder:{type:[Boolean,String],default:!0},showOdd:{type:[Boolean,String],default:!0},showSelect:{type:[Boolean,String],default:!1},rowHeight:{type:[Number,String],default:"3rem|2rem"},onDblclick:{type:Function,default:()=>function(){}},multiSelect:{type:[Boolean,String],default:!1},autoHeight:{type:[Boolean,String],default:!1}},emits:["update:modelValue"],setup(L,{emit:P}){const i=L,j=r(()=>p(i.showHead)),x=r(()=>p(i.showBody)),D=r(()=>p(i.showPadding)),$=r(()=>p(i.showOdd)),g=r(()=>p(i.showBorder)),m=r(()=>p(i.showSelect)),C=r(()=>i.heads),I=r(()=>{let e=1;const l=[[]],o=[];return C.value.forEach(t=>{if(t.hide)return;const n=t.text.split("|").reverse();if(n.length>e){const c=n.length-e;e=n.length,l.push(...JSON.parse(`[${"[],".repeat(c-1)}[]]`));for(const h of o)h.row++}n.forEach((c,h)=>{const k=l[h],f=k[k.length-1];if((f==null?void 0:f.text)!=c){const H=n.length-1==h,R={...t,text:c,col:1,row:1+(H?e-n.length:0),align:H?t.align:"center"};R.isLast=H,k.push(R),h==n.length-1&&o.push(R)}else f.col++})}),l}),W=r(()=>i.rowHeight),_=r(()=>{const e=W.value;if(typeof e=="number"){const t=u(e);return{head:t,body:t}}const[l,o]=String(e).trim().split("|");return{head:u(o!=null?o:l),body:u(l)}}),N=(e,l)=>{var o,t,n;return{width:u((o=e.width)!=null?o:60),minWidth:u((t=e.width)!=null?t:60),maxWidth:u((n=e.width)!=null?n:60),textAlign:e.align,height:_.value[l],lineHeight:_.value[l]}},O=w(),v=w(null);T(g,()=>setTimeout(()=>O.value=v.value&&getComputedStyle(v.value).height),{immediate:!0});const q=r(()=>{var e;return`calc(100% - ${(e=O.value)!=null?e:`(${_.value.head} + 2px) * ${I.value.length})`}`}),B=w(0),z=e=>{var o,t;const l=(t=u(-((o=e==null?void 0:e.target)==null?void 0:o.scrollLeft)))!=null?t:"0";l!=B.value&&(B.value=l)},V=r(()=>i.datas),A=w(null),J=e=>P("update:modelValue",A.value=e);return(e,l)=>(a(),d("comp-grid",{"no-border":e.brop(!s(g))},[s(j)?(a(),d("p-head",Q,[E("table",{ref_key:"domHead",ref:v,head:"",style:S({left:B.value})},[(a(!0),d(y,null,b(s(I),o=>(a(),d("tr",U,[(a(!0),d(y,null,b(o,t=>{var n;return a(),d("th",{cell:"",_lastInRow:e.brop(t.isLast),rowspan:t.row,colspan:t.col,title:t.text,style:S(N(t,"head")),"no-padding":e.brop(!((n=t.padding)!=null?n:s(D))),"no-border":e.brop(!s(g))},F(t.text),13,X)}),256))]))),256))],4)])):G("",!0),s(x)?(a(),d("p-body",{key:1,style:S({height:s(q)}),onScroll:z},[E("table",Y,[(a(!0),d(y,null,b(s(V),(o,t)=>(a(),d("tr",{row:"",selected:e.brop(s(m)&&A.value==o),hover:e.brop(s(m)),onDblclick:n=>L.onDblclick(o)},[(a(!0),d(y,null,b(s(C),n=>{var c;return a(),d("td",{cell:"",_lastInRow:e.brop(t==s(V).length-1),title:o[n.index],style:S(N(n,"body")),"no-padding":e.brop(!((c=n.padding)!=null?c:s(D))),"no-border":e.brop(!s(g)),even:e.brop(s($)&&!(t%2)),odd:e.brop(s($)&&t%2),onClick:h=>s(m)&&J(o)},F(o[n.index]),13,ee)}),256))],40,Z))),256))])],36)):G("",!0)],8,K))}},ne=M(te,[["__scopeId","data-v-600755be"]]);export{ne as default};
